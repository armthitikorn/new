<script type="module">
    // ... [‡∏™‡πà‡∏ß‡∏ô Supabase Config ‡πÅ‡∏•‡∏∞ Global Variables] ...

    // --- 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (READ) - ‡πÉ‡∏ä‡πâ .or() ---
    const fetchInitialData = async () => {
        // ... [‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ] ...

        try {
            // üö® FIXED: ‡πÉ‡∏ä‡πâ .or() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö TEXT Filter
            const orFilter = `product_type.eq.${CURRENT_PRODUCT_ID},product_type.eq.all`;
            
            // 2.1 S1 Customer Replies
            const { data: s1Data, error: s1Error } = await window.supabase
                .from('customer_replies_s1')
                .select('turn_index, audio_url, is_finale')
                .or(orFilter) // üö® ‡πÉ‡∏ä‡πâ .or()
                .order('turn_index', { ascending: true });
            if (s1Error) throw s1Error;
            
            // 2.2 S2 Questions
            const { data: s2Data, error: s2Error } = await window.supabase
                .from('questions_s2')
                .select('q_index, audio_url, q_text')
                .or(orFilter) // üö® ‡πÉ‡∏ä‡πâ .or()
                .order('q_index', { ascending: true });
            if (s2Error) throw s2Error;

            // ... [‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î S3, S4, S5 ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô .or(orFilter) ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î] ...

            window.loadingText.textContent = '‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß';
            window.loadingText.className = 'success-text';

        } catch (err) {
            // ... [‡∏™‡πà‡∏ß‡∏ô Error] ...
        }
    };
    
    // ... [‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ] ...
</script>
